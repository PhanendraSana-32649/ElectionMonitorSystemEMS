<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0" />
<title>Election Monitoring System</title>
<link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;500;600&display=swap" rel="stylesheet" />
<link rel="stylesheet" href="style.css" />
<script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
</head>

<body>
<header class="top-header">
  <div class="header-left">
    <h1>Election Monitoring System</h1>
    <p>Ensuring Transparency, Trust & Fair Elections</p>
    <p id="roleDisplay" class="role-display"></p>
  </div>
  <div class="header-right">
    <button id="themeToggle" class="theme-toggle">üåô Dark Mode</button>
    <a href="login.html" class="logout-btn">Logout</a>
  </div>
</header>

<nav class="navbar">
  <a class="menu-admin" onclick="showSection('adminPanel')">Admin Panel</a>
  <a class="menu-citizen" onclick="showSection('citizenDashboard')">Citizen Home</a>
  <a class="menu-observer" onclick="showSection('observerDashboard')">Observer Panel</a>
  <a class="menu-analyst" onclick="showSection('analystDashboard')">Analytics</a>
  <a onclick="showSection('livevotes')">Live Votes</a>
  <a onclick="showSection('track')">Complaints</a>
  <a onclick="showSection('chat')">Discussions</a>
</nav>

<section id="adminPanel" class="section">
<h2>Admin Dashboard</h2>
<p class="section-subtitle">Manage users, complaints & system overview.</p>

<div class="cards-container">
  <div class="stat-card"><div class="stat-icon">üë•</div><div><h3>Total Users</h3><p id="totalUsers">0</p></div></div>
  <div class="stat-card"><div class="stat-icon">üì®</div><div><h3>Total Complaints</h3><p id="adminTotalComplaints">0</p></div></div>
  <div class="stat-card"><div class="stat-icon">‚è≥</div><div><h3>Pending Complaints</h3><p id="adminPendingComplaints">0</p></div></div>
</div>

<h3 class="section-title">Registered Users</h3>
<div class="table-wrapper">
  <table class="data-table">
    <thead><tr><th>Name</th><th>Email</th><th>Role</th><th>Status</th><th>Actions</th></tr></thead>
    <tbody id="usersTableBody"></tbody>
  </table>
</div>

<h3 class="section-title">Complaints (Admin Control)</h3>
<div class="table-wrapper">
  <table class="data-table">
    <thead><tr><th>ID</th><th>Location</th><th>Category</th><th>Severity</th><th>Status</th><th>Change Status</th></tr></thead>
    <tbody id="adminComplaintsBody"></tbody>
  </table>
</div>
</section>

<section id="citizenDashboard" class="section">
  <h2>Citizen Dashboard</h2>
  <p class="section-subtitle">Report issues & follow election updates.</p>
  <button class="primary-btn" onclick="openReportModal()">+ Report Issue</button>
</section>

<section id="observerDashboard" class="section">
  <h2>Observer Panel</h2>
  <p class="section-subtitle">Submit booth reports</p>

  <form id="boothForm" onsubmit="submitBoothReport(event)">
    <input type="text" id="boothId" placeholder="Booth ID" required />
    <input type="text" id="boothLocation" placeholder="Location" required />
    <select id="boothEvmStatus" required>
      <option disabled selected>EVM Status</option>
      <option value="Working Fine">Working Fine</option>
      <option value="Minor Issue">Minor Issue</option>
      <option value="Major Failure">Major Failure</option>
    </select>
    <textarea id="boothNotes" placeholder="Notes" required></textarea>
    <button type="submit" class="primary-btn">Submit</button>
  </form>

  <h3>Recent Booth Reports</h3>
  <div id="boothReportsContainer" class="booth-list"></div>
</section>

<section id="analystDashboard" class="section">
  <h2>Analytics Dashboard</h2>
  <div class="charts-row">
    <div class="chart-card"><h3>Complaints by Category</h3><canvas id="analystComplaintsChart"></canvas></div>
    <div class="chart-card"><h3>Severity</h3><canvas id="analystSeverityChart"></canvas></div>
  </div>
  <div class="charts-row">
    <div class="chart-card"><h3>Votes Verification</h3><canvas id="analystVerifyChart"></canvas></div>
    <div class="chart-card"><h3>Complaints Timeline</h3><canvas id="analystTimelineChart"></canvas></div>
  </div>
</section>

<section id="livevotes" class="section">
<div class="section-header">
<h2>üî¥ LIVE Vote Counting</h2>
<span id="lastUpdated" class="live-timer">Last updated: --:--:--</span>
</div>

<div class="live-controls">
  <button class="primary-btn" onclick="castVote('ABC')">Vote PARTY A</button>
  <button class="primary-btn" onclick="castVote('XYZ')">Vote PARTY B</button>
  <button class="primary-btn" onclick="castVote('IND')">Vote PARTY C</button>
</div>

<div class="leaderboard">
  <h3>Leader Board</h3>
  <div id="leaderboardContent"></div>
</div>

<div class="verification-box">
  <h3>Verification & Blockchain Log</h3>
  <p><strong>Verified:</strong> <span id="verVotes">0</span></p>
  <p><strong>Pending:</strong> <span id="unverVotes">0</span></p>
  <p><strong>Hash:</strong> <span id="hashValue"></span></p>
  <div id="blockchainLog" class="blockchain-log"></div>
</div>

<div class="charts-row">
  <div class="chart-card"><h3>Live Votes</h3><canvas id="liveVotesChart"></canvas></div>
  <div class="chart-card"><h3>Verification</h3><canvas id="verifyChart"></canvas></div>
</div>
</section>

<section id="track" class="section">
<h2>Complaints Tracking</h2>
<input id="complaintSearch" type="text" placeholder="Search..." />
<div id="complaintsContainer" class="complaints-list"></div>
<p id="noComplaintsMsg" class="no-data-msg">No complaints yet.</p>
</section>

<section id="chat" class="section">
<h2>Discussions</h2>
<div id="chatMessages" class="chat-messages"></div>
<div class="chat-input">
  <input id="chatInput" type="text" placeholder="Type message...">
  <button class="primary-btn" onclick="sendChatMessage()">Send</button>
</div>
</section>

<section id="verify" class="section">
<h2>Voter Verification</h2>
<div class="verify-box">
  <input id="voterIdInput" type="text" placeholder="Enter voter ID">
  <button onclick="verifyVoterId()" class="primary-btn">Verify</button>
</div>
<p id="voterResult" class="verify-result"></p>
</section>

<div id="reportModal" class="modal">
<div class="modal-content">
<h3>New Complaint</h3>
<form id="reportForm" onsubmit="submitReport(event)">
<input id="repName" placeholder="Your name" required />
<input id="repLocation" placeholder="Location / Booth ID" required />
<select id="repCategory" required>
<option disabled selected>Select Category</option>
<option>Fraud / Malpractice</option>
<option>Violence</option>
<option>Technical Issue (EVM)</option>
<option>Management</option>
<option>Other</option>
</select>
<select id="repSeverity" required>
<option disabled selected>Select Severity</option>
<option>Low</option>
<option>Medium</option>
<option>High</option>
<option>Critical</option>
</select>
<textarea id="repDescription" rows="3" required placeholder="Description"></textarea>
<div class="modal-actions">
<button type="button" class="secondary-btn" onclick="closeReportModal()">Cancel</button>
<button type="submit" class="primary-btn">Submit</button>
</div>
</form>
</div>
</div>

<div id="toast" class="toast"></div>
<script src="app.js"></script>
</body>
</html>
